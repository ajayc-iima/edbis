
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IIMA EDBIS Survey</title>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>

:root {
  --primary-color: #1C477D;
  --secondary-color: #F0F0F0;
  --text-color: #333333;
  --background-color: #FFFFFF;
  --accent-color: #3A6EA5;
  --success-color: #28A745;
  --error-color: #DC3545;
  --border-radius: 8px;
  --transition: all 0.3s ease;
}

body, html {
  font-family: 'Open Sans', sans-serif;
  margin: 0;
  padding: 0;
  color: var(--text-color);
  background-color: var(--background-color);
  line-height: 1.6;
}

.container {
  max-width: 800px;
  margin: 2rem auto;
  padding: 2rem;
  background-color: var(--secondary-color);
  border-radius: var(--border-radius);
  box-shadow: 0 4px 6px rgba(0,0,0,0.1);
}

.header {
  display: flex;
  align-items: center;
  padding: 1rem;
  margin-bottom: 20px;
  border-radius: var(--border-radius);
  background: linear-gradient(145deg, var(--background-color), var(--secondary-color));
  box-shadow: 5px 5px 10px #d1d1d1, -5px -5px 10px var(--background-color);
  transition: var(--transition);
}

.header:hover {
  transform: translateY(-3px);
  box-shadow: 8px 8px 15px #d1d1d1, -8px -8px 15px var(--background-color);
}

.logo-wrapper {
  position: relative;
  overflow: hidden;
  border-radius: var(--border-radius);
  transition: var(--transition);
}

.logo {
  max-width: 350px;
  height: auto;
  margin-right: 1rem;
  transition: var(--transition);
  filter: drop-shadow(0 2px 4px rgba(0,0,0,0.1));
}

.logo-wrapper:hover .logo {
  transform: scale(1.03);
  filter: drop-shadow(0 4px 6px rgba(0,0,0,0.2));
}

.logo-wrapper::after {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
  transition: 0.5s;
}

.logo-wrapper:hover::after {
  left: 100%;
}

.header-text {
  flex: 1;
  padding: 0.5rem;
  border-radius: var(--border-radius);
  transition: var(--transition);
}

.header-text:hover {
  background: var(--secondary-color);
  transform: translateX(5px);
}

h1 {
  color: var(--primary-color);
  font-size: 1.5rem;
  margin: 0;
  font-weight: 700;
  position: relative;
  display: inline-block;
}

h1::after {
  content: '';
  position: absolute;
  width: 0;
  height: 2px;
  bottom: -3px;
  left: 0;
  background-color: var(--primary-color);
  transition: width 0.3s ease;
}

.header-text:hover h1::after {
  width: 100%;
}

.subtitle {
  font-size: 1.2rem;
  color: var(--text-color);
  font-weight: 400;
  margin: 0.3rem 0 0 0;
  opacity: 0.8;
  transition: var(--transition);
}

.header-text:hover .subtitle {
  transform: translateX(5px);
  opacity: 1;
}

.company-info {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 1rem;
  margin-bottom: 2rem;
}

.company-info input, .company-info select, .form-input {
  padding: 0.75rem;
  border: 2px solid #cccccc4a;
  border-radius: var(--border-radius);
  font-size: 0.9rem;
  width: 100%;
  box-sizing: border-box;
  transition: var(--transition);
}

.company-info input:hover, .company-info select:hover, .form-input:hover {
  border-color: var(--primary-color);
}

.company-info input:focus, .company-info select:focus, .form-input:focus {
  outline: none;
  box-shadow: 0 0 0 3px rgba(28, 71, 125, 0.2);
  border-color: var(--primary-color);
}

.questions-table {
  width: 100%;
  border-collapse: separate;
  border-spacing: 0 0.5rem;
  margin-bottom: 2rem;
}

.questions-table th, .questions-table td {
  padding: 0.75rem;
}

.questions-table th {
  background-color: var(--primary-color);
  color: var(--background-color);
  font-weight: 600;
  font-size: 1rem;
  border-radius: var(--border-radius) var(--border-radius) 0 0;
}

.question {
  font-size: 1rem;
  font-weight: 400;
  max-width: 250px;
}

.rating-slider {
  -webkit-appearance: none;
  width: 100%;
  height: 8px;
  border-radius: 4px;
  background: #d3d3d3;
  outline: none;
  opacity: 0.7;
  transition: var(--transition);
}

.rating-slider:hover {
  opacity: 1;
}

.rating-slider::-webkit-slider-thumb {
  -webkit-appearance: none;
  appearance: none;
  width: 24px;
  height: 24px;
  border-radius: 50%;
  background: var(--primary-color);
  cursor: pointer;
  transition: var(--transition);
}

.rating-slider::-webkit-slider-thumb:hover {
  transform: scale(1.2);
  box-shadow: 0 0 10px rgba(28, 71, 125, 0.5);
}

.rating-value {
  font-weight: 600;
  color: var(--primary-color);
  width: 100px;
  text-align: center;
  font-size: 1rem;
  transition: var(--transition);
}

.loading {
  display: none;
  text-align: center;
  margin-top: 1rem;
  color: var(--primary-color);
  font-weight: 600;
}

button {
  background-color: var(--primary-color);
  color: var(--background-color);
  padding: 1rem 2rem;
  border: none;
  border-radius: var(--border-radius);
  cursor: pointer;
  font-size: 1.1rem;
  transition: var(--transition);
  margin-top: 1rem;
  float: right;
  font-weight: 600;
}

button:hover {
  background-color: var(--accent-color);
  transform: translateY(-3px);
  box-shadow: 0 4px 8px rgba(0,0,0,0.2);
}

button:active {
  transform: translateY(-1px);
  box-shadow: 0 2px 4px rgba(0,0,0,0.2);
}

button:disabled {
  background-color: #ccc;
  cursor: not-allowed;
}

.progress-bar {
  width: 100%;
  height: 8px;
  background-color: #d3d3d3;
  border-radius: 4px;
  overflow: hidden;
  margin-top: 1rem;
  clear: both;
}

.progress {
  width: 0;
  height: 100%;
  background-color: var(--primary-color);
  transition: width 0.5s ease;
}

.disclaimer {
  font-size: 0.9rem;
  margin-top: 2rem;
  padding: 1rem;
  background-color: var(--secondary-color);
  border-left: 4px solid var(--primary-color);
  border-radius: var(--border-radius);
  transition: var(--transition);
}

.disclaimer:hover {
  transform: scale(1.02);
  box-shadow: 0 4px 8px rgba(0,0,0,0.1);
}

.disclaimer strong {
  color: var(--primary-color);
}

.disclaimer-toggle {
  color: var(--primary-color);
  text-decoration: underline;
  cursor: pointer;
  transition: var(--transition);
}

.disclaimer-toggle:hover {
  color: var(--accent-color);
}

.disclaimer-content {
  display: none;
  margin-top: 1rem;
  transition: var(--transition);
  opacity: 0;
}

.disclaimer-content.show {
  display: block;
  opacity: 1;
}

.questions-table tr {
  transition: var(--transition);
}

.questions-table tr:hover {
  background-color: rgba(28, 71, 125, 0.05);
}

.participation-options {
  display: flex;
  justify-content: space-around;
}

.participation-option {
  display: flex;
  align-items: center;
}

.participation-option input[type="radio"] {
  margin-right: 0.5rem;
}

.participation-question {
    margin-top: 2rem;
    padding: 1.5rem;
    background-color: #e8f4fd;
    border-radius: var(--border-radius);
    transition: var(--transition);
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

.participation-question:hover {
    transform: translateY(-3px);
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
}

.disclaimer-container {
    margin-top: 2rem;
    margin-bottom: 2rem;
}

.disclaimer {
    background-color: #f9f9f9;
    padding: 1rem;
    border-radius: var(--border-radius);
    border-left: 4px solid var(--primary-color);
}

.submit-container {
    display: flex;
    justify-content: flex-end;
    margin-top: 2rem;
}

.submit-button-container {
    display: flex;
    flex-direction: column;
    align-items: flex-end;
}

button[type="submit"] {
    padding: 0.75rem 1.5rem;
    font-size: 1rem;
    transition: var(--transition);
}

button[type="submit"]:hover {
    background-color: #0056b3;
    transform: translateY(-2px);
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
}

.loading {
    margin-top: 0.5rem;
}

@media (max-width: 768px) {
    .submit-container {
        justify-content: stretch;
    }

    .submit-button-container {
        width: 100%;
    }

    button[type="submit"] {
        width: 100%;
    }
}

.completion-message {
  display: none;
  text-align: center;
  margin-top: 2rem;
  padding: 1rem;
  background-color: var(--success-color);
  color: var(--background-color);
  border-radius: var(--border-radius);
  font-size: 1.2rem;
  font-weight: 600;
  animation: fadeIn 1s ease-out;
}

.modal {
  display: none;
  position: fixed;
  z-index: 1000;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0,0,0,0.5);
}

.modal-content {
  background-color: var(--background-color);
  margin: 15% auto;
  padding: 20px;
  border: 1px solid #888;
  width: 80%;
  max-width: 500px;
  border-radius: var(--border-radius);
  text-align: center;
}

.close-modal {
  color: #aaa;
  float: right;
  font-size: 28px;
  font-weight: bold;
  cursor: pointer;
}

.close-modal:hover,
.close-modal:focus {
  color: var(--text-color);
  text-decoration: none;
  cursor: pointer;
}

.input-container {
  width: 100%;
  max-width: 500px;
  margin: 20px auto;
  padding: 20px;
  background: linear-gradient(145deg, var(--secondary-color), var(--background-color));
  border: 1px solid #e0e0e0;
  border-radius: var(--border-radius);
  box-shadow: 0 8px 30px rgba(0, 0, 0, 0.1);
  box-sizing: border-box;
}

.input-label {
  display: block;
  margin-bottom: 15px;
  font-size: 18px;
  color: var(--text-color);
  font-weight: 600;
  letter-spacing: 0.5px;
}

.input-wrapper {
  display: flex;
  align-items: center;
  background: var(--background-color);
  border: 2px solid #e0e0e0;
  border-radius: var(--border-radius);
  padding: 8px 10px;
  transition: var(--transition);
}

.input-icon {
  color: var(--primary-color);
  font-size: 20px;
  margin-right: 12px;
}

input[type="email"] {
  flex: 1;
  border: none;
  outline: none;
  padding: 10px 0;
  font-size: 16px;
  color: var(--text-color);
  background: transparent;
}

input[type="email"]::placeholder {
  color: #bdc3c7;
}

.input-wrapper:hover,
.input-wrapper:focus-within {
  border-color: var(--primary-color);
  box-shadow: 0 0 0 3px rgba(28, 71, 125, 0.2);
}


.form-group {
  margin-bottom: 1.5rem;
}

.form-label {
  display: block;
  margin-bottom: 0.5rem;
  font-size: 1rem;
  font-weight: 600;
  color: var(--text-color);
}

.checkbox-container {
  display: flex;
  align-items: center;
  margin-bottom: 1rem;
}

.checkbox-input {
  position: absolute;
  opacity: 0;
  cursor: pointer;
  height: 0;
  width: 0;
}

.checkbox-label {
  position: relative;
  padding-left: 35px;
  cursor: pointer;
  font-size: 1rem;
  user-select: none;
}

.checkmark {
  position: absolute;
  top: 0;
  left: 0;
  height: 25px;
  width: 25px;
  background-color: var(--secondary-color);
  border-radius: 4px;
  transition: var(--transition);
}

.checkbox-input:checked ~ .checkmark {
  background-color: var(--primary-color);
}

.checkmark:after {
  content: "";
  position: absolute;
  display: none;
}

.checkbox-input:checked ~ .checkmark:after {
  display: block;
}

.checkbox-label .checkmark:after {
  left: 9px;
  top: 5px;
  width: 5px;
  height: 10px;
  border: solid var(--background-color);
  border-width: 0 3px 3px 0;
  transform: rotate(45deg);
}

.card {
  background-color: var(--background-color);
  border-radius: var(--border-radius);
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
  padding: 1.5rem;
  margin-bottom: 1.5rem;
  transition: var(--transition);
}

.card:hover {
  transform: translateY(-5px);
  box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
}

.card-title {
  font-size: 1.25rem;
  color: var(--primary-color);
  margin-bottom: 1rem;
}

.card-content {
  font-size: 1rem;
  color: var(--text-color);
}

.alert {
  padding: 1rem;
  border-radius: var(--border-radius);
  margin-bottom: 1rem;
  font-weight: 600;
}

.alert-success {
  background-color: var(--success-color);
  color: var(--background-color);
  border: 1px solid #c3e6cb;
}

.alert-error {
  background-color: var(--error-color);
  color: var(--background-color);
  border: 1px solid #f5c6cb;
}

.alert-info {
  background-color: var(--secondary-color);
  color: var(--primary-color);
  border: 1px solid #bee5eb;
}

.row {
  display: flex;
  flex-wrap: wrap;
  margin-right: -15px;
  margin-left: -15px;
}

.col {
  flex-basis: 0;
  flex-grow: 1;
  max-width: 100%;
  padding-right: 15px;
  padding-left: 15px;
}

@media (max-width: 768px) {
  .container {
    padding: 1rem;
  }

  .header {
    flex-direction: column;
    align-items: stretch;
  }

  .logo {
    max-width: 100%;
    margin-right: 0;
    margin-bottom: 1rem;
  }

  .company-info {
    grid-template-columns: 1fr;
  }

  .col {
    flex-basis: 100%;
    max-width: 100%;
  }
}

.text-center {
  text-align: center;
}

.mt-2 {
  margin-top: 0.5rem;
}

.mb-2 {
  margin-bottom: 0.5rem;
}

.py-2 {
  padding-top: 0.5rem;
  padding-bottom: 0.5rem;
}

.hidden {
  display: none;
}

@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}



.info-icon {
    display: inline-block;
    width: 12px;
    height: 12px;
    margin-left: 0px;
    position: relative;
    cursor: pointer;
    vertical-align: super; /* This makes the icon appear as superscript */
}


.info-icon-inner {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: #7496ad;
    color: white;
    font-size: 10px;
    font-weight: bold;
    font-style: italic;
    font-family: 'Georgia', serif;
    transition: all 0.3s ease;
}

.info-icon:hover .info-icon-inner {
    background-color: #2980b9;
    box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.3);
}

.tooltip {
    display: none;
    position: absolute;
    background-color: #34495e;
    color: #fff;
    text-align: center;
    border-radius: 6px;
    padding:8px 12px;
    z-index: 1;
    left: 50%;
    transform: translateX(-50%);
    width: max-content;
    max-width: 250px;
    font-size: 14px;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    transition: opacity 0.3s ease, transform 0.3s ease;
}


.tooltip.show {
    display: block;
    opacity: 1;
    transform: translateX(-50%) translateY(5px);
}

.question {
    position: relative;
}


@media (max-width: 768px) {
    .tooltip {
        font-size: 12px; /* Adjust the font size for better readability */
        max-width: 200px; /* Decrease the max width to fit smaller screens */
        padding: 6px 10px; /* Adjust padding for a more compact look */
        transform: translateX(-50%) translateY(10px); /* Move the tooltip slightly to prevent overlap */
    }

    .tooltip.show {
        transform: translateX(-50%) translateY(8px); /* Adjust transition to be consistent with the smaller size */
    }
}

.modern-input {
    display: flex;
    align-items: center;
    background: var(--background-color);
    border: 2px solid #e0e0e0;
    border-radius: var(--border-radius);
    padding: 8px 15px;
    transition: var(--transition);
    position: relative;
}

.input-icon {
    color: var(--primary-color);
    font-size: 15px;
    margin-right: 10px;
    cursor: pointer;
    transition: color 0.2s ease;
}

.input-icon:hover {
    color: #2980b9;
}

input[type="text"] {
    flex: 1;
    border: none;
    outline: none;
    font-size: 16px;
    color: var(--text-color);
    background: transparent;
}

input[type="text"]::placeholder {
    color: #bdc3c7;
}

.modern-input:hover,
.modern-input:focus-within {
    border-color: var(--primary-color);
    box-shadow: 0 0 0 3px rgba(28, 71, 125, 0.2);
}

/* Advanced Media Query for mobile screens */
@media (max-width: 600px) {

  .questions-table td, .questions-table th {
    padding: 0.5rem; /* Reduce padding for mobile */
  }

  .questions-table td:last-child {
    font-size: 0.9rem; /* Make the text smaller in the last column */
    width: 60px; /* Adjust the width of the last column */
  }

   .questions-table td:first-child {
    font-size: 0.9rem; /* Make the text smaller in the last column */
    width: 150px; /* Adjust the width of the last column */
  }




  /* Further UI tweaks for small screens */
  .questions-table tr:hover {
    background-color: rgba(28, 71, 125, 0.1); /* Make hover effect slightly stronger */
  }
}
</style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="logo-wrapper">
                <img src="https://conference.iima.ac.in/arwibc/wp-content/uploads/2023/08/IIMA-MCFME-1024x368.jpg" alt="IIMA MCFME Logo" class="logo">
            </div>
            <div class="header-text">
                <h1>IIMA-EDBIS Survey</h1>
                <p class="subtitle">Ease of Doing Business in Indian States</p>
            </div>
        </div>

      <form id="edbisForm">
    <div class="company-info modern-input-container">
        <!-- Company Name Input Field with Lock Icon -->
       <div class="input-wrapper modern-input" style="position: relative;">
    <input type="text" id="companyName" name="companyName" placeholder="Company Name *" required style="padding-right: 30px;">
    <span class="input-icon" onclick="scrollToDisclaimer()" title="Click to view confidentiality disclaimer" style="position: absolute; right: 10px; top: 50%; transform: translateY(-50%);">
        <i class="fas fa-lock"></i>
    </span>
</div>


        <!-- CIN/LLPIN/FCRN Input Field -->
        <div class="input-wrapper">
            <input type="text" id="cin" name="cin" placeholder="CIN/LLPIN/FCRN (Optional)">
        </div>

        <!-- State/UT Dropdown Selection (Full Width) -->
        <div class="input-wrapper full-width">
            <select id="state" name="state" required style="background-color:white;">
                <option value="" disabled selected>Primary State/UT of Production of the Company *</option>
                    <option value="Arunachal Pradesh">Arunachal Pradesh</option>
                    <option value="Assam">Assam</option>
                    <option value="Bihar">Bihar</option>
                    <option value="Chhattisgarh">Chhattisgarh</option>
                    <option value="Goa">Goa</option>
                    <option value="Gujarat">Gujarat</option>
                    <option value="Haryana">Haryana</option>
                    <option value="Himachal Pradesh">Himachal Pradesh</option>
                    <option value="Jharkhand">Jharkhand</option>
                    <option value="Karnataka">Karnataka</option>
                    <option value="Kerala">Kerala</option>
                    <option value="Madhya Pradesh">Madhya Pradesh</option>
                    <option value="Maharashtra">Maharashtra</option>
                    <option value="Manipur">Manipur</option>
                    <option value="Meghalaya">Meghalaya</option>
                    <option value="Mizoram">Mizoram</option>
                    <option value="Nagaland">Nagaland</option>
                    <option value="Odisha">Odisha</option>
                    <option value="Punjab">Punjab</option>
                    <option value="Rajasthan">Rajasthan</option>
                    <option value="Sikkim">Sikkim</option>
                    <option value="Tamil Nadu">Tamil Nadu</option>
                    <option value="Telangana">Telangana</option>
                    <option value="Tripura">Tripura</option>
                    <option value="Uttar Pradesh">Uttar Pradesh</option>
                    <option value="Uttarakhand">Uttarakhand</option>
                    <option value="West Bengal">West Bengal</option>
                    <option value="Andaman and Nicobar Islands">Andaman and Nicobar Islands</option>
                    <option value="Chandigarh">Chandigarh</option>
                    <option value="Dadra and Nagar Haveli and Daman and Diu">Dadra and Nagar Haveli and Daman and Diu</option>
                    <option value="Delhi">Delhi</option>
                    <option value="Jammu and Kashmir">Jammu and Kashmir</option>
                    <option value="Ladakh">Ladakh</option>
                    <option value="Lakshadweep">Lakshadweep</option>
                    <option value="Puducherry">Puducherry</option>
            </select>
        </div>
    </div>

    <p style="font-weight: 600; color: var(--primary-color); margin-top: 1rem; margin-bottom: 0rem;">
        Rate your perception of the following dimensions of interaction between the regulatory framework of the <strong><span style="color: var(--primary-color);">State/UT</span></strong> and the business operations of your company:
    </p>
    <p style="font-weight: 100; margin-top: 0rem; margin-bottom: 0rem;">
        <i>The scale varies from "Very Difficult" (left) to "Very Easy" (right).</i>
    </p>

    <!-- Questions Table -->
    <table class="questions-table">
        <thead>
            <tr>
                <th>Ease of</th>
                <th>Rating</th>
                <th></th>
            </tr>
        </thead>
        <tbody id="questions"></tbody>
    </table>

    <!-- Participation Question -->
    <div class="participation-question">
        <h3>Your Input Matters!</h3>
        <p>Thank you for your insights. Would you be willing to participate in a detailed follow-up survey to help provide an in-depth assessment of the ease of doing business in Indian states?</p>
        <div class="participation-options">
            <label class="participation-option">
                <input type="radio" name="detailedSurvey" value="yes" required> Yes, I'd love to contribute further!
            </label>
            <label class="participation-option">
                <input type="radio" name="detailedSurvey" value="no" required> No, thank you.
            </label>
        </div>
        <div id="followUpEmailContainer" class="email-container" style="display: none; margin-top: 1rem;">
            <div class="input-container">
                <label for="followUpEmail" class="input-label">Please provide your email ID for further correspondence regarding the detailed survey:</label>
                <div class="input-wrapper">
                    <span class="input-icon">
                        <i class="fas fa-envelope"></i>
                    </span>
                    <input type="email" id="followUpEmail" name="followUpEmail" placeholder="Enter your email ID" required>
                </div>
                <small class="error-message" id="emailError" style="display: none;">Please enter a valid email address.</small>
            </div>
        </div>
    </div>

    <!-- Confidentiality Disclaimer -->
    <div class="disclaimer-container">
        <div class="disclaimer">
            <span class="disclaimer-toggle" onclick="toggleDisclaimer()">Click to view Confidentiality Disclaimer</span>
            <div class="disclaimer-content" id="disclaimerContent">
                <strong>CONFIDENTIALITY DISCLAIMER:</strong> This study is being conducted by the Misra Centre for Financial Markets and Economy (MCFME) at the Indian Institute of Management (IIM), Ahmedabad. The study will undertake a nationwide survey annually to collect information from Indian companies on their perception of the business environment. <strong>The information collected during the survey will be exclusively used for the production and dissemination of scholarly work. Company name and any other information that enables identification will be kept confidential.</strong> Non-personally identifiable information and survey responses shared by each respondent will be combined with those gathered from other participants and analysed as part of a group.
                <br><br>
                We appreciate your participation in the survey. Click on the <strong>Submit Survey</strong> button to end the survey. Please note that once submitted, no further modifications can be made to the survey.
                <br><br>
                For any further queries, write to us at <a href="mailto:edbis@iima.ac.in">edbis@iima.ac.in</a>.
            </div>
        </div>
    </div>

    <!-- Submit Button -->
    <div class="submit-container">
        <div class="submit-button-container">
            <button type="submit">Submit Survey</button>
            <div class="loading" id="loading" style="display: none;">Submitting survey...</div>
        </div>
    </div>
</form>




        <div class="progress-bar">
            <div class="progress" id="progress"></div>
        </div>
        <div class="completion-message" id="completionMessage">
            Thank you for completing the survey! Your input is highly valuable.
        </div>
    </div>

    <div id="submissionModal" class="modal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h2>Thank You!</h2>
            <p>Your survey has been submitted successfully. You will be redirected to the Misra Centre website shortly.</p>
        </div>
    </div>

    <script>
const questions = [
    {
        text: "Obtaining permits and approvals",
        description: "Ease of getting license and permit from government authorities for starting and running a business"
    },
    {
        text: "Acquisition of land",
        description: "Ease of purchasing and leasing land for business purposes"
    },
    {
        text: "Access to finance",
        description: "The ease with which your company can raise debt capital from banks and NBFCs in the State/UT. 'Very Easy' means your company can get credit quickly with minimal paperwork and at favourable terms"
    },
    {
        text: "Recruitment of workers",
        description: "Ease of adhering to the legal requirements when hiring both contractual and permanent workers"
    },
    {
        text: "Flexibility to reduce workforce",
        description: "Ease of following contractual obligations and managing legal risks when firing workers."
    },
    {
        text: "Access to reliable public infrastructure",
        description: "Access to quality transport and logistic infrastructure, power, water, telecommunications, and other public goods and services."
    },
    {
        text: "Resolution of contractual and business disputes",
        description: "Ease of resolution in terms of regulatory challenges, legal delays, costs incurred, etc. "
    },
    {
        text: "Seeking law and order assistance",
        description: "The overall situation of law and order in the State/UT and the ease of interaction with enforcement officers. 'Very Easy' means a peaceful and stable law and order environment where help is readily available from authorities during an emergency."
    }
];



        const SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbyrwEZa8HZ0YZZHIEH_lEK8sKmuZvbHuhC3u6OEw8oKIf_p0t8zO2uafaZLm41ATEb41w/exec';
        const ratingLabels = ["Very Difficult", "Difficult", "Neutral", "Easy", "Very Easy"];
        const ratings = {};
        function getRandomRating() {
    //return Math.floor(Math.random() * 5) + 1;
     return 3;
}


function scrollToDisclaimer() {
    const disclaimer = document.getElementById('disclaimerContent');
    disclaimer.classList.add('show'); // Make sure the disclaimer is visible
    disclaimer.scrollIntoView({ behavior: 'smooth', block: 'start' });
}



 function createQuestions() {
    const questionsContainer = document.getElementById('questions');
    questions.forEach((questionObj, index) => {
        const row = document.createElement('tr');
        const randomValue = getRandomRating();
        row.innerHTML = `
            <td class="question">
                ${questionObj.text}
                <span class="info-icon" data-index="${index}"><span class="info-icon-inner">i</span></span>
                <div class="tooltip" id="tooltip${index}">${questionObj.description}</div>
            </td>
            <td>
                <input type="range" min="1" max="5" value="${randomValue}" class="rating-slider" id="slider${index}">
            </td>
            <td class="rating-value" id="value${index}">${ratingLabels[randomValue - 1]}</td>
        `;
        questionsContainer.appendChild(row);
        const slider = row.querySelector(`#slider${index}`);
        const valueCell = row.querySelector(`#value${index}`);
        slider.addEventListener('input', function() {
            const value = parseInt(this.value);
            valueCell.textContent = ratingLabels[value - 1];
            ratings[questionObj.text] = value;
            updateProgress();
            valueCell.classList.add('pulse');
            setTimeout(() => valueCell.classList.remove('pulse'), 500);
        });
        ratings[questionObj.text] = randomValue;
    });

    // Add click event listeners to info icons
    document.querySelectorAll('.info-icon').forEach(icon => {
    icon.addEventListener('click', function(event) {
        event.stopPropagation(); // Prevent the click from propagating to the document

        // Close all other tooltips
        document.querySelectorAll('.tooltip').forEach(tooltip => {
            tooltip.classList.remove('show');
        });

        const tooltipId = `tooltip${this.dataset.index}`;
        const tooltip = document.getElementById(tooltipId);
        tooltip.classList.toggle('show');
    });
});

    // Close tooltip when clicking outside
    document.addEventListener('click', function() {
        document.querySelectorAll('.tooltip').forEach(tooltip => {
            tooltip.classList.remove('show');
        });
    });
}

        function updateProgress() {
            const totalQuestions = questions.length;
            const answeredQuestions = Object.keys(ratings).length;
            const progress = (answeredQuestions / totalQuestions) * 100;
            document.getElementById('progress').style.width = `${progress}%`;
        }

        async function submitForm(formData) {
            let queryString = new URLSearchParams({
                timestamp: formData.timestamp,
                companyName: formData.companyName,
                cin: formData.cin || '',
                state: formData.state,
                detailedSurvey: formData.detailedSurvey,
                followUpEmail: formData.followUpEmail || ''
            }).toString();

            Object.entries(formData.ratings).forEach(([question, rating]) => {
                queryString += `&${encodeURIComponent(question)}=${rating}`;
            });

            try {
                await fetch(`${SCRIPT_URL}?${queryString}`, {
                    method: 'GET',
                    mode: 'no-cors'
                });
                return true;
            } catch (error) {
                console.error('Submission error:', error);
                throw error;
            }
        }

        document.getElementById('edbisForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            if (!validateForm()) {
                return;
            }

            const loading = document.getElementById('loading');
            const submitButton = this.querySelector('button[type="submit"]');
            
            try {
                loading.style.display = 'block';
                submitButton.disabled = true;

                const formData = {
                    timestamp: new Date().toISOString(),
                    companyName: document.getElementById('companyName').value.trim(),
                    cin: document.getElementById('cin').value.trim(),
                    state: document.getElementById('state').value,
                    ratings: { ...ratings },
                    detailedSurvey: document.querySelector('input[name="detailedSurvey"]:checked').value,
                    followUpEmail: document.getElementById('followUpEmail').value.trim()
                };

                await submitForm(formData);
                
                // Show the modal
                document.getElementById('submissionModal').style.display = 'block';
                
                // Set a timeout to redirect after 5 seconds
                setTimeout(() => {
                    window.location.href = 'https://www.iima.ac.in/faculty-research/centers/Misra-Centre-for-Financial-Markets-and-Economy';
                }, 2000);
                
            } catch (error) {
                alert('Error submitting survey. Please try again.');
                console.error('Error:', error);
            } finally {
                loading.style.display = 'none';
                submitButton.disabled = false;
            }
        });

        function resetRatings() {
            questions.forEach((question, index) => {
                ratings[question] = 3;
                const valueCell = document.getElementById(`value${index}`);
                const slider = document.getElementById(`slider${index}`);
                if (valueCell && slider) {
                    valueCell.textContent = "Neutral";
                    slider.value = 3;
                }
            });
            updateProgress();
        }

        document.querySelectorAll('input[name="detailedSurvey"]').forEach(radio => {
    radio.addEventListener('change', function() {
        const followUpEmailContainer = document.getElementById('followUpEmailContainer');
        const followUpEmailField = document.getElementById('followUpEmail');
        if (this.value === 'yes') {
            followUpEmailContainer.style.display = 'block';
            followUpEmailField.setAttribute('required', 'required'); // Make email required
        } else {
            followUpEmailContainer.style.display = 'none';
            followUpEmailField.removeAttribute('required'); // Remove required attribute
            followUpEmailField.value = ''; // Clear email field
        }
    });
});

function validateForm() {
    const requiredFields = ['companyName', 'state'];
    const missingFields = requiredFields.filter(field => 
        !document.getElementById(field).value.trim()
    );

    if (missingFields.length > 0) {
        alert('Please fill in all required fields.');
        missingFields.forEach(field => {
            const element = document.getElementById(field);
            element.classList.add('pulse');
            setTimeout(() => element.classList.remove('pulse'), 1000);
        });
        return false;
    }

    // Check if the user has selected a detailed survey option
    const detailedSurveyOption = document.querySelector('input[name="detailedSurvey"]:checked');
    if (!detailedSurveyOption) {
        alert('Please indicate your willingness to participate in a detailed survey.');
        document.querySelector('.participation-question').classList.add('pulse');
        setTimeout(() => document.querySelector('.participation-question').classList.remove('pulse'), 1000);
        return false;
    }

    // Get the value of the selected option
    const detailedSurveyValue = detailedSurveyOption.value;
    if (detailedSurveyValue === 'yes') {
        const followUpEmail = document.getElementById('followUpEmail').value.trim();
        if (!followUpEmail) {
            alert('Please enter your email for the follow-up survey.');
            document.getElementById('followUpEmail').classList.add('pulse');
            setTimeout(() => document.getElementById('followUpEmail').classList.remove('pulse'), 1000);
            return false;
        }
        // Check for a valid email address
        if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(followUpEmail)) {
            alert('Please enter a valid email address for the follow-up survey.');
            document.getElementById('followUpEmail').classList.add('pulse');
            setTimeout(() => document.getElementById('followUpEmail').classList.remove('pulse'), 1000);
            return false;
        }
    } 

    return true; // Validation passed
}




        function toggleDisclaimer() {
            const content = document.getElementById('disclaimerContent');
            content.classList.toggle('show');
        }

        document.addEventListener('DOMContentLoaded', function() {
            const disclaimer = document.querySelector('.disclaimer');
            const content = document.getElementById('disclaimerContent');

            disclaimer.addEventListener('mouseenter', function() {
                if (!content.classList.contains('show')) {
                    disclaimer.style.transform = 'scale(1.02)';
                    disclaimer.style.boxShadow = '0 4px 8px rgba(0,0,0,0.1)';
                }
            });

            disclaimer.addEventListener('mouseleave', function() {
                if (!content.classList.contains('show')) {
                    disclaimer.style.transform = '';
                    disclaimer.style.boxShadow = '';
                }
            });
        });

        document.querySelectorAll('input[name="detailedSurvey"]').forEach(radio => {
            radio.addEventListener('change', function() {
                const followUpEmailContainer = document.getElementById('followUpEmailContainer');
                if (this.value === 'yes') {
                    followUpEmailContainer.style.display = 'block';
                } else {
                    followUpEmailContainer.style.display = 'none';
                    document.getElementById('followUpEmail').value = '';
                }
            });
        });

        // Close modal when clicking on the close button or outside the modal
        document.querySelector('.close-modal').addEventListener('click', () => {
            document.getElementById('submissionModal').style.display = 'none';
        });

        window.addEventListener('click', (event) => {
            if (event.target === document.getElementById('submissionModal')) {
                document.getElementById('submissionModal').style.display = 'none';
            }
        });

        // Add mousemove event listener to the header for the radial gradient effect
        const header = document.querySelector('.header');
        header.addEventListener('mousemove', (e) => {
            const rect = header.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;
            header.style.setProperty('--mouse-x', `${x}px`);
            header.style.setProperty('--mouse-y', `${y}px`);
        });

        createQuestions();
        updateProgress();
document.querySelectorAll('input[name="detailedSurvey"]').forEach(radio => {
    radio.addEventListener('change', function() {
        const followUpEmailContainer = document.getElementById('followUpEmailContainer');
        const followUpEmailField = document.getElementById('followUpEmail');
        
        if (this.value === 'yes') {
            followUpEmailContainer.classList.add('show');
            followUpEmailField.setAttribute('required', 'required'); // Make email required
        } else {
            followUpEmailContainer.classList.remove('show');
            followUpEmailField.removeAttribute('required'); // Remove required attribute
            followUpEmailField.value = ''; // Clear email field
            document.getElementById('emailError').style.display = 'none'; // Hide any error message
        }
    });
});


    </script>
</body>
</html>
